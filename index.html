<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mia & Thor — Puppy Journal</title>
<style>
:root{--border:#e2e8f0;--accent:#2563eb}
*{box-sizing:border-box}
body{font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:#f7fafc;color:#0f172a}
header{padding:12px 16px;background:#fff;border-bottom:1px solid var(--border)}
.container{max-width:1100px;margin:0 auto;padding:16px}
.card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:0 2px 6px rgba(15,23,42,.06);margin:16px 0}
.banner{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);z-index:9}
.banner .bar{display:flex;align-items:center;gap:10px;padding:8px 16px}
.banner img{width:72px;height:72px;border-radius:10px;border:1px solid var(--border);object-fit:cover}
.banner button{margin-left:auto;border:1px solid var(--border);background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.tabs button{padding:10px 14px;border:1px solid var(--border);background:#fff;border-radius:10px;cursor:pointer}
.tabs button.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.panel{display:none} .panel.active{display:block}
table{width:100%;border-collapse:collapse;margin-top:8px} th,td{border:1px solid var(--border);padding:8px;text-align:center}
#chart{width:100%;height:520px} .legend{display:flex;gap:12px;margin:8px 0 12px 0;flex-wrap:wrap}
.legend label{display:flex;gap:6px;align-items:center;border:1px solid var(--border);border-radius:8px;background:#fff;padding:6px 10px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:14px}
details{border:1px solid var(--border);border-radius:14px;background:#fff;overflow:hidden}
summary{list-style:none;cursor:pointer;padding:12px 14px;background:#f8fafc;border-bottom:1px solid var(--border);display:flex;gap:8px;align-items:center}
summary::-webkit-details-marker{display:none}
.badge{background:#e2e8f0;border-radius:999px;padding:4px 10px;font-size:12px;color:#334155}
.checklist label{display:flex;align-items:center;gap:8px;margin:6px 0}
</style></head>
<body>
<header><h1 style="margin:0">Mia & Thor — Puppy Journal</h1></header>

<div class="banner" id="topbar">
  <div class="bar">
    <img id="thorImg" src="photos/thor.jpg" alt="Thor" onerror="this.src='https://via.placeholder.com/72x72.png?text=Thor'">
    <img id="miaImg"  src="photos/mia.jpg"  alt="Mia"  onerror="this.src='https://via.placeholder.com/72x72.png?text=Mia'">
    <div style="color:#334155">Thor (Cane Corso) • Mia (Rottweiler)</div>
    <button id="togglePhotos">Hide photos ▴</button>
  </div>
</div>

<main class="container">
  <div class="card">
    <div class="tabs">
      <button class="tab active" data-tab="overview">Overview</button>
      <button class="tab" data-tab="weights">Weights & Lengths</button>
      <button class="tab" data-tab="care">Care Roadmap</button>
      <button class="tab" data-tab="birth">Birth Log</button>
      <button class="tab" data-tab="parents">Parents</button>
    </div>

    <section class="panel active" id="overview">
      <h2>Litter Summary</h2>
      <table>
        <tr><th>Total Pups</th><th>Live</th><th>Stillborn</th><th>Whelping Window</th></tr>
        <tr><td>6</td><td>3</td><td>3</td><td>12–13 Sep 2025</td></tr>
      </table>
      <details class="checklist" open>
        <summary><b>Milestones Checklist</b> (saved on this device)</summary>
        <div id="checks"></div>
      </details>
    </section>

    <section class="panel" id="weights">
      <h2>Weights & Interactive Chart</h2>
      <div class="legend" id="legend"></div>
      <svg id="chart" viewBox="0 0 960 520" preserveAspectRatio="xMidYMid meet"></svg>
      <div class="grid" style="margin-top:12px">
        <details open><summary><b>Weights table</b> (from <code>data/weights.json</code>)</summary>
          <table id="tblW"><thead><tr><th>Day</th><th>Pup 2 (Blue ♂)</th><th>Pup 3 (Pink ♀)</th><th>Pup 5 (Orange ♂)</th></tr></thead><tbody></tbody></table>
        </details>
        <details open><summary><b>Lengths table</b> (from <code>data/lengths.json</code>)</summary>
          <table id="tblL"><thead><tr><th>Day</th><th>Pup 2 (Blue ♂)</th><th>Pup 3 (Pink ♀)</th><th>Pup 5 (Orange ♂)</th></tr></thead><tbody></tbody></table>
        </details>
      </div>
    </section>

    <section class="panel" id="care">
      <h2>Care Roadmap (collapsible by week)</h2>
      <div class="grid">
        <details id="w2"><summary><b>Week 2 — Worming</b> <span class="badge">Fri 26 Sep 2025</span></summary>
          <div style="padding:12px 14px"><ul>
            <li>Worm all pups (pyrantel), dose by weight; log doses.</li>
            <li>Short, gentle handling; warm, dry bedding.</li>
            <li>Quiet time with Mia; keep area 26–28°C.</li>
          </ul></div>
        </details>
        <details id="w3"><summary><b>Week 3 — Handling & Sounds</b> <span class="badge">Fri 03 Oct 2025</span></summary>
          <div style="padding:12px 14px"><ul>
            <li>Daily handling; introduce household sounds.</li>
            <li>Shallow water dish; nails trim if sharp.</li>
          </ul></div>
        </details>
        <details id="w4"><summary><b>Week 4 — Worming + Start Puppy Mush</b> <span class="badge">Fri 10 Oct 2025</span></summary>
          <div style="padding:12px 14px"><ul>
            <li>Second worming; start puppy mush 3–4x/day.</li>
            <li>Supervised intro of Thor through barriers with Mia present.</li>
            <li>Toilet area/pads to begin house training.</li>
          </ul></div>
        </details>
        <details id="w6"><summary><b>Week 6 — Vet Check + Vax & Microchip</b> <span class="badge">Fri 24 Oct 2025</span></summary>
          <div style="padding:12px 14px"><ul>
            <li>Third worming.</li>
            <li>First vaccination + microchips; short car rides; 2–3 calm visitors.</li>
          </ul></div>
        </details>
        <details id="w7"><summary><b>Week 7 — Training Foundations</b> <span class="badge">Fri 31 Oct 2025</span></summary>
          <div style="padding:12px 14px"><ul>
            <li>Crate naps, recall games; soft chew toys; different surfaces.</li>
          </ul></div>
        </details>
        <details id="w8"><summary><b>Week 8 — Rehoming Prep + Parasite Preventatives</b> <span class="badge">Fri 07 Nov 2025</span></summary>
          <div style="padding:12px 14px"><ul>
            <li>Final worming; start flea/tick prevention per vet.</li>
            <li>Puppy packs; microchip transfer; owner handover checklist.</li>
          </ul></div>
        </details>
      </div>
    </section>

    <section class="panel" id="birth">
      <h2>Birth Log</h2>
      <table>
        <tr><th>Pup #</th><th>Time</th><th>Sex</th><th>Status</th><th>Placenta</th><th>Notes</th></tr>
        <tr><td>1</td><td>19:15</td><td>—</td><td>Stillborn</td><td>—</td><td>Green discharge</td></tr>
        <tr><td>2</td><td>19:16</td><td>Female</td><td>Alive</td><td>—</td><td>Top-ups overnight; nursing strongly</td></tr>
        <tr><td>3</td><td>19:42</td><td>Male</td><td>Alive</td><td>Eaten</td><td>Guided to latch; now independent</td></tr>
        <tr><td>4</td><td>—</td><td>—</td><td>Stillborn</td><td>—</td><td>—</td></tr>
        <tr><td>5</td><td>07:30</td><td>Male</td><td>Alive</td><td>Eaten</td><td>Latched immediately</td></tr>
        <tr><td>6</td><td>10:30</td><td>—</td><td>Stillborn</td><td>Eaten</td><td>Confronting; normal instinct</td></tr>
      </table>
    </section>

    <section class="panel" id="parents">
      <h2>Parents</h2>
      <table>
        <tr><th>Dog</th><th>Breed</th><th>Sex</th><th>DOB / Age</th><th>Approx. Weight</th><th>Notes</th></tr>
        <tr><td>Mia</td><td>Rottweiler</td><td>Female</td><td>15 Jan 2020 (5y 8m+)</td><td>~45 kg</td><td>First litter; calm, attentive mum</td></tr>
        <tr><td>Thor</td><td>Cane Corso</td><td>Male</td><td>~2 years</td><td>~45 kg</td><td>Desexed (Jul 2025)</td></tr>
      </table>
    </section>

  </div>
</main>

<script>
// Tabs
document.querySelectorAll('.tab').forEach(btn=>{
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});
// Photo collapse
const bar=document.getElementById('topbar'), tbtn=document.getElementById('togglePhotos');
function setPhotosCollapsed(c){ bar.style.display = c ? 'none' : 'block'; tbtn.textContent = c ? 'Show photos ▾' : 'Hide photos ▴'; localStorage.setItem('photos_collapsed', c?'1':'0'); }
setPhotosCollapsed(localStorage.getItem('photos_collapsed')==='1');
tbtn.addEventListener('click',()=> setPhotosCollapsed(bar.style.display!=='none'));

// Checklist (saved to localStorage)
const checklistItems = [
  'Week 2 worming done',
  'Week 4 worming done',
  'Week 6 vet check completed',
  'Week 6 first vaccination given',
  'Week 6 microchips implanted',
  'Week 8 worming done',
  'Flea/tick prevention started',
  'Puppy packs prepared',
  'Microchip transfers submitted'
];
const checksDiv = document.getElementById('checks');
const stored = JSON.parse(localStorage.getItem('mt_checks') || '[]');
checklistItems.forEach((txt, i) => {
  const id = 'chk_'+i;
  const wrap = document.createElement('label');
  const cb = document.createElement('input'); cb.type='checkbox'; cb.id=id; cb.checked = !!stored[i];
  const span = document.createElement('span'); span.textContent = txt;
  wrap.appendChild(cb); wrap.appendChild(span); checksDiv.appendChild(wrap);
  cb.addEventListener('change', () => {
    const cur = Array.from(checksDiv.querySelectorAll('input')).map(x=>x.checked);
    localStorage.setItem('mt_checks', JSON.stringify(cur));
  });
});

// Load weights & lengths and draw chart/table
async function load() {
  const jw = await fetch('data/weights.json', {cache:'no-store'}).then(r=>r.json());
  const jl = await fetch('data/lengths.json', {cache:'no-store'}).then(r=>r.json());
  // Tables
  const tbw=document.querySelector('#tblW tbody'); jw.weights.forEach(r=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${r.day}</td><td>${r.pup2}</td><td>${r.pup3}</td><td>${r.pup5}</td>`; tbw.appendChild(tr);});
  const tbl=document.querySelector('#tblL tbody'); jl.records.forEach(r=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${r.day}</td><td>${r.pup2}</td><td>${r.pup3}</td><td>${r.pup5}</td>`; tbl.appendChild(tr);});

  // Chart
  const days = jw.weights.map(r=>r.day), p2 = jw.weights.map(r=>r.pup2), p3 = jw.weights.map(r=>r.pup3), p5 = jw.weights.map(r=>r.pup5);
  const svg=document.getElementById('chart'), W=960,H=520,M={l:64,r:24,t:24,b:46}, innerW=W-M.l-M.r, innerH=H-M.t-M.b;
  const all=[...p2,...p3,...p5]; const yMin=Math.floor((Math.min(...all)-40)/20)*20, yMax=Math.ceil((Math.max(...all)+60)/20)*20;
  const x=d=>M.l+((d-days[0])/(15-days[0]))*innerW, y=v=>M.t+innerH-((v-yMin)/(yMax-yMin))*innerH;
  function L(x1,y1,x2,y2,c){const e=document.createElementNS('http://www.w3.org/2000/svg','line');e.setAttribute('x1',x1);e.setAttribute('y1',y1);e.setAttribute('x2',x2);e.setAttribute('y2',y2);e.setAttribute('stroke',c||'#e2e8f0');return e;}
  function T(x0,y0,t){const e=document.createElementNS('http://www.w3.org/2000/svg','text');e.setAttribute('x',x0);e.setAttribute('y',y0);e.setAttribute('font-size','12');e.setAttribute('fill','#334155');e.setAttribute('text-anchor','middle');e.textContent=t;return e;}
  function P(d,c,w=2.5){const e=document.createElementNS('http://www.w3.org/2000/svg','path');e.setAttribute('d',d);e.setAttribute('fill','none');e.setAttribute('stroke',c);e.setAttribute('stroke-width',w);return e;}
  function C(cx,cy,c){const e=document.createElementNS('http://www.w3.org/2000/svg','circle');e.setAttribute('cx',cx);e.setAttribute('cy',cy);e.setAttribute('r',4);e.setAttribute('fill',c);return e;}
  for(let gy=yMin; gy<=yMax; gy+=50){const yy=y(gy); svg.appendChild(L(M.l,yy,W-M.r,yy));}
  svg.appendChild(L(M.l,M.t,M.l,H-M.b,'#94a3b8')); svg.appendChild(L(M.l,H-M.b,W-M.r,H-M.b,'#94a3b8'));
  for(let d=days[0]; d<=15; d++){svg.appendChild(T(x(d),H-M.b+18,'Day '+d));}
  for(let gy=yMin; gy<=yMax; gy+=100){const yy=y(gy); const t=T(M.l-10,yy+4,gy); t.setAttribute('text-anchor','end'); svg.appendChild(t);}
  svg.appendChild(T(M.l-42,M.t-6,'Weight (g)'));
  const colors=['#1f77b4','#e45756','#4c9a2a'];
  const legend=document.getElementById('legend'); const series=[{k:'Pup 2',v:p2,c:colors[0]},{k:'Pup 3',v:p3,c:colors[1]},{k:'Pup 5',v:p5,c:colors[2]}];
  const layer=document.createElementNS('http://www.w3.org/2000/svg','g'); svg.appendChild(layer);
  series.forEach(s=>{const lab=document.createElement('label'); const cb=document.createElement('input'); cb.type='checkbox'; cb.checked=true; const sw=document.createElement('span'); sw.style.cssText='display:inline-block;width:12px;height:12px;border-radius:6px;background:'+s.c; const tx=document.createElement('span'); tx.textContent=' '+s.k; lab.appendChild(cb); lab.appendChild(sw); lab.appendChild(tx); legend.appendChild(lab); s.cb=cb;});
  function draw(){ while(layer.firstChild) layer.removeChild(layer.firstChild);
    series.forEach(s=>{ if(!s.cb.checked) return; let d=''; s.v.forEach((v,i)=>{ d+=(i?'L':'M')+x(days[i])+' '+y(v)+' '; }); layer.appendChild(P(d,s.c)); s.v.forEach((v,i)=> layer.appendChild(C(x(days[i]),y(v),s.c))); });
  }
  legend.addEventListener('change', draw); draw();
}
load();
</script>
</body></html>
